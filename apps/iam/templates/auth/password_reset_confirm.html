{% extends "base/auth_base.html" %}

{% block title %}Set New Password - Django Template{% endblock %}

{% block auth_title %}Set new password{% endblock %}

{% block auth_subtitle %}
{% if validlink %}
Create a new password for your account.
{% else %}
Password reset link invalid.
{% endif %}
{% endblock %}

{% block auth_content %}
{% if validlink %}
<form method="post" class="space-y-6">
    {% csrf_token %}
    
    {% for field in form %}
    <div class="form-control">
        <label class="label" for="{{ field.id_for_label }}">
            <span class="label-text">{{ field.label }}</span>
        </label>
        {{ field }}
        {% if field.help_text %}
        <div class="mt-1 text-xs text-base-content/60 px-1">
            {{ field.help_text|safe }}
        </div>
        {% endif %}
        {% if field.errors %}
        <label class="label">
            <span class="label-text-alt text-error">{{ field.errors.0 }}</span>
        </label>
        {% endif %}
    </div>
    {% endfor %}
    
    <button type="submit" class="btn btn-primary btn-block">Change Password</button>
</form>
{% else %}
<div class="text-center space-y-4">
    <div class="alert alert-error">
        <span>The password reset link was invalid, possibly because it has already been used.  Please request a new password reset.</span>
    </div>
    <a href="{% url 'iam:password_reset' %}" class="btn btn-primary btn-block">Request New Reset</a>
</div>
{% endif %}
{% endblock %}
